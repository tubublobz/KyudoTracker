<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kyudo Tracker</title>
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="styles.css">
  <link rel="icon" type="image/png" href="icons/512_max.png">
</head>

<body>
  <header class="app-header">
    <h1>Kyudo Tracker <span id="app-version" class="version">v0.8.0</span></h1>
    <button id="nav-bows-btn" class="btn-icon-nav" title="Mes arcs">ğŸ¹</button>
  </header>
  <div id="app-container">
    <!-- SÃ©lection de l'arc -->
    <section class="control-group">
      <h2>Arc</h2>
      <select id="bow-select" class="bow-selector">
        <option value="">Aucun arc sÃ©lectionnÃ©</option>
        <!-- Les arcs seront chargÃ©s en JS -->
      </select>
    </section>
    <!-- Section Makiwara -->
    <section class="control-group">
      <h2>Makiwara</h2>
      <div class="stepper">
        <span class="stepper-label">ğŸ¯ Tirs</span>
        <button id="btn-makiwara-minus" class="stepper-btn minus">âˆ’</button>
        <span id="count-makiwara" class="stepper-count">0</span>
        <button id="btn-makiwara-plus" class="stepper-btn plus">+</button>
      </div>
    </section>

    <!-- Section Kinteki -->
    <section class="control-group">
      <h2>Kinteki</h2>
      <div class="stepper">
        <span class="stepper-label">âœ… TouchÃ©s</span>
        <button id="btn-hits-minus" class="stepper-btn minus">âˆ’</button>
        <span id="count-hits" class="stepper-count">0</span>
        <button id="btn-hits-plus" class="stepper-btn plus">+</button>
      </div>
      <div class="stepper">
        <span class="stepper-label">âŒ RatÃ©s</span>
        <button id="btn-miss-minus" class="stepper-btn minus">âˆ’</button>
        <span id="count-miss" class="stepper-count">0</span>
        <button id="btn-miss-plus" class="stepper-btn plus">+</button>
      </div>
      <div class="stats-display">
        <span id="count-kinteki">0</span> tirs | <span id="count-percent">0</span>%
      </div>
    </section>

    <!-- Actions -->
    <section class="actions">
      <div class="control-group">
        <label for="session-date">Date de la sÃ©ance</label>
        <input type="date" id="session-date" class="date-input">
      </div>
      <div class="actions-row">
        <button id="btn-reset" class="btn-reset">â†º Reset</button>
        <button id="btn-save" class="btn-primary" disabled>Enregistrer</button>
      </div>
    </section>
  </div>

  <!-- Ã‰cran de gestion des arcs -->
  <div id="bows-screen" style="display:none">
    <header class="bows-header">
      <h1>ğŸ¹ Mes arcs</h1>
    </header>
  
    <button id="add-bow-btn" class="btn-primary btn-add-bow">
      + Nouvel arc
    </button>

    <div id="bows-list" class="bows-list">
      <!-- Les cartes d'arcs seront gÃ©nÃ©rÃ©es ici -->
    </div>

    <button id="back-from-bows-btn" class="btn-secondary">â† Retour</button>
  </div>

  <!-- Formulaire arc (modal/overlay) -->
  <div id="bow-form-overlay" class="overlay">
    <div class="bow-form-container">
      <h2 id="bow-form-title">Nouvel arc</h2>

      <form id="bow-form">
        <label>
          Nom de l'arc *
          <input type="text" id="bow-name" required>
        </label>

    <div class="form-row">
      <label>
        Puissance (kg)
        <input type="number" id="bow-strength" step="0.5" min="0">
      </label>

      <label>
        Taille
        <select id="bow-size">
          <option value="">Non prÃ©cisÃ©e</option>
          <option value="namisun">Namisun (ä¸¦å¯¸)</option>
          <option value="nisun">Nisun (äºŒå¯¸)</option>
          <option value="yonsun">Yonsun (å››å¯¸)</option>
          <option value="rokusun">Rokusun (å…­å¯¸)</option>
          <option value="autre">Autre</option>
        </select>
      </label>
    </div>

        <!-- Bambou masquÃ© - Voir BACKLOG.md -->
        <!--
        <label class="checkbox-label">
          <input type="checkbox" id="bow-bamboo">
          Arc en bambou
        </label>
        -->

        <label>
          Couleur
          <div class="color-picker-wrapper">
            <input type="color" id="bow-color" value="#3498db">
            <span id="bow-color-value">#3498db</span>
          </div>
          <div class="color-suggestions" id="bow-color-suggestions">
            <!-- Pastilles gÃ©nÃ©rÃ©es en JS -->
          </div>
        </label>

        <label>
          Notes
          <textarea id="bow-notes" rows="3"></textarea>
        </label>

        <div class="form-actions">
          <button type="submit" class="btn-primary">Enregistrer</button>
          <button type="button" id="cancel-bow-form" class="btn-secondary">Annuler</button>
        </div>
      </form>
    </div>
  </div>
  <!-- Historique -->
  <section class="history-section">
    <h2>Historique</h2>
    <ul id="history"></ul>
  </section>

  <!-- Notification de mise Ã  jour -->
  <div id="update-notification" class="update-notification hidden">
    <p>Une nouvelle version est disponible.</p>
    <div class="notification-actions">
      <button id="update-btn" class="btn-update">Mettre Ã  jour</button>
      <button id="close-notification-btn" class="btn-close" aria-label="Fermer">&times;</button>
    </div>
  </div>
  <!-- Container pour les notifications -->
  <div id="toast-container"></div>
  <!-- Scripts -->
  <script src="https://unpkg.com/dexie@3.2.4/dist/dexie.js"></script>
  <script type="module" src="app.js"></script>
</body>

</html>